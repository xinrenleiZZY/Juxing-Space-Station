import os

# 项目根目录
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

# 数据存储路径
RAW_DATA_DIR = os.path.join(BASE_DIR, "data", "Hisraw")
NEWRAW_DATA_DIR = os.path.join(BASE_DIR, "data", "Newraw")
PROCESSED_DATA_DIR = os.path.join(BASE_DIR, "data", "processed")
DATABASE_PATH = os.path.join(BASE_DIR, "data", "aqi_database.db")

# 爬虫配置
REQUEST_INTERVAL = 2  # 请求间隔（秒），避免反爬
MAX_RETRY_TIMES = 3  # 请求失败重试次数
USER_AGENT_POOL = [
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36",
    "Mozilla/5.0 (Linux; Android 10; SM-G975F) AppleWebKit/537.36"
]

# 历史数据配置
START_YEAR = 2025  # 起始年份
END_YEAR = 2026    # 结束年份（可修改为当前年份）
HISTORY_CRAWL_BATCH_SIZE = 10  # 每次爬取10个城市后保存

# 实时数据配置
REALTIME_CRAWL_INTERVAL = 3600  # 实时数据采集间隔（秒）=1小时
REALTIME_CITIES = ["北京", "河北", "天津"]  # 优先爬取的重点城市

# 日志配置
LOG_LEVEL = "INFO"
LOG_FILE = os.path.join(BASE_DIR, "aqi_crawl.log")

# 是否把爬取的数据同时写入 SQLite（True），否则仅写 CSV
SAVE_TO_SQLITE = True

# 创建目录（若不存在）
for dir_path in [RAW_DATA_DIR, PROCESSED_DATA_DIR]:
    if not os.path.exists(dir_path):
        os.makedirs(dir_path)

# 代理IP池（格式：协议://IP:端口）
PROXY_POOL = [
    "http://49.79.138.194:18111",
    "http://49.79.138.212:21058",
    "http://114.231.58.244:22541",
    "http://114.231.236.17:20335",
    "http://114.231.129.48:15436",
    "http://117.86.187.214:22747",
    "http://121.226.32.206:20991",
    "http://49.79.138.243:15188",
    "http://114.231.90.254:15825",
    "http://117.86.187.237:17423",
    "http://114.231.90.214:19298",
    "http://114.231.59.134:15241",
    "http://114.231.59.134:15241",
    "http://49.67.132.16:15998",
    "http://180.120.11.92:16909",
    "http://114.231.129.23:20020",
    "http://114.231.90.243:20427",
    "http://49.67.132.56:15926",
    "http://114.231.90.254:16154",
    "http://49.79.138.212:20629",
    "http://114.231.236.42:15135",
    "http://180.125.131.147:21958",
    "http://180.120.11.95:18302",
    "http://180.120.14.39:18877",
    "http://49.79.138.253:23710",
    "http://49.67.132.28:21140",
    "http://114.231.236.14:15948",
    "http://114.231.236.9:21453",
    "http://114.231.129.23:16417",
    "http://114.231.90.229:19747",
    "http://114.231.58.241:23666",
    "http://117.86.187.214:21000",
    "http://49.79.138.252:15855",
    "http://114.231.195.121:15813",
    "http://121.226.32.232:21152",
    "http://180.120.14.53:19780",
    "http://180.120.14.40:20965",
    "http://117.86.187.230:21605",
    "http://114.231.90.254:17330",
    "http://114.231.236.13:18585",
    "http://114.231.90.216:16828",
    "http://180.120.11.77:20329",
    "http://114.232.3.234:21962",
    "http://114.231.195.81:21950",
    "http://117.86.187.234:18295",
    "http://114.231.195.98:22992",
    "http://114.231.129.59:23477",
    "http://114.231.195.77:21824",
    "http://180.125.131.139:21420",
    "http://180.125.131.139:21501",
    "http://117.86.187.237:18896",
    "http://114.231.195.83:15258",
    "http://114.231.195.75:21328",
    "http://114.231.236.42:23290",
    "http://49.67.132.12:18281",
    "http://49.67.132.59:19969",
    "http://180.125.131.166:18738",
    "http://121.226.32.194:19706",
    "http://114.231.90.201:23493",
    "http://114.231.236.4:22291",
    "http://114.231.58.254:19342",
    "http://121.226.32.223:15690",
    "http://117.86.187.244:17697",
    "http://117.86.187.221:16786",
    "http://49.79.138.206:19672",
    "http://114.231.195.122:23181",
    "http://121.226.32.227:20280",
    "http://114.231.236.31:23330",
    "http://114.231.195.110:17373",
    "http://114.231.195.75:23237",
    "http://121.226.32.238:19705",
    "http://114.231.90.215:19340",
    "http://114.231.129.53:23219",
    "http://114.231.90.216:17908",
    "http://49.79.138.198:19796",
    "http://49.79.138.202:22351",
    "http://117.86.187.203:15640",
    "http://114.231.129.42:19601",
    "http://114.231.90.225:22807",
    "http://180.120.11.89:23208",
    "http://114.231.195.118:15615",
    "http://114.231.90.200:23240",
    "http://180.120.11.126:21511",
    "http://117.86.187.237:16281",
    "http://114.231.236.55:21415",
    "http://114.231.129.16:23535",
    "http://121.226.32.238:15890",
    "http://114.231.58.197:20381",
    "http://114.231.236.17:15612",
    "http://114.231.236.57:20871",
    "http://121.226.32.244:21239",
    "http://49.79.138.239:16897",
    "http://180.120.11.77:22085",
    "http://117.86.187.230:21507",
    "http://114.231.90.217:19986",
]
HAI_PROXY_POOL = [
    # 海外代理\变量未启用
    "http://123.141.181.47:5031",
    "http://123.141.181.54:5031",
    "http://223.135.156.183:8080",
    "http://38.127.172.183:24171",
    "http://202.178.125.136:8080",
    "http://74.89.123.49:8888",
    "http://147.28.240.218:80",
    "http://38.127.172.106:24171",
    "http://27.79.193.165:16000",
    "http://67.43.236.18:10873",
    "http://38.54.71.67:80",
    "http://200.216.55.162:8080",
    "http://190.14.236.185:999",
    "http://62.210.215.36:80",
    "http://202.59.89.43:8080",
    "http://51.79.99.237:4502",
    "http://152.53.107.230:80",
    "http://47.91.65.23:3128",
    "http://27.79.188.65:16000",
    "http://79.110.200.148:8081",
    "http://51.38.230.146:443",
    "http://116.103.136.199:1001",
    "http://27.79.157.127:16000",
    "http://77.110.114.116:8081"
]
# 代理验证超时（秒）
PROXY_TIMEOUT = 5
# 是否启用代理（True/False）
USE_PROXY = False

# config/settings.py（两个隧道代理配置）
# 隧道代理配置
# TUNNEL_PROXY = {
#     "tunnel": "e987.kdltps.com:15818",
#     "username": "t16472849454173",
#     "password": "afkfzbgs"
# }
TUNNEL_PROXY = {
    "tunnel": "u339.kdltpspro.com:15818",
    "username": "t16481434346697",
    "password": "irplb6ff"
}
USE_TUNNEL_PROXY = False  # 控制是否启用代理